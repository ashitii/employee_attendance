
<div class="card mt-4">
  <div class="card-header text-white d-flex flex-wrap justify-content-between align-items-center">
    <strong>Delete Employee/Manager Accounts</strong>
    <form method="get" class="d-flex align-items-center gap-2" style="max-width: 350px;">
      <select name="role" class="form-select form-select-sm" style="width: 120px;">
        <option value="">All Roles</option>
        <option value="Employee" {% if request.GET.role == 'Employee' %}selected{% endif %}>Employee</option>
        <option value="Manager" {% if request.GET.role == 'Manager' %}selected{% endif %}>Manager</option>
      </select>
      <input type="text" name="search" class="form-control form-control-sm" placeholder="Search username/email" value="{{ request.GET.search|default:'' }}" style="width: 140px;">
      <button type="submit" class="btn btn-danger btn-sm">Filter</button>
      {% comment %} <a href="?" class="btn btn-secondary btn-sm">Clear</a> {% endcomment %}
    </form>
  </div>
  <div class="card-body">
    <div class="table-responsive">
    <table class="table-shadow table table-bordered table-striped align-middle text-nowrap">
        <thead class="table-light">
          <tr style="background-color:#b8d0ff; color: black;">
            <th>Username</th>
            <th>Full Name</th>
            <th>Email</th>
            <th>Role</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody style="color: black;">
          {% for user in all_users %}
          <tr>
            <td>{{ user.username }}</td>
            <td>{{ user.get_full_name }}</td>
            <td>{{ user.email }}</td>
            <td>{% for g in user.groups.all %}{{ g.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
            <td>
              <form method="post" action="{% url 'dashboard_user_delete' user.id %}" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this user?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm"><i class="bi bi-trash"></i> Delete</button>
              </form>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="5" class="text-center">No users found.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
